<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rpt_org_payment" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="104766fe-f4eb-4c51-934d-7443fe22e11e">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CompanyName" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Email" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Phone" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Address" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="State" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="Web" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="City" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="total" class="java.lang.Double" isForPrompting="false"/>
	<parameter name="bill_to" class="java.lang.String"/>
	<parameter name="from" class="java.util.Date"/>
	<parameter name="to" class="java.util.Date"/>
	<parameter name="deptCode" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="header" class="java.lang.Boolean">
		<defaultValueExpression><![CDATA[false]]></defaultValueExpression>
	</parameter>
	<parameter name="HEADER_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["C:\\Users\\user\\Documents\\NetBeansProjects\\ClinicMangement\\src\\images\\headers\\mri-brain-ct-scan.jpg"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMAGE_DIR" class="java.io.InputStream" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="hospitalId" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     dt_billing.`id` AS dt_billing_id,
     dt_billing.`dept_code` AS dept_code,
     dt_billing.`visit_code` AS service_code,
     dt_billing.`customer_id` AS customer_id,
     dt_billing.`date` AS date,
     dt_billing.`credit` AS credit,
     dt_billing.`debit` AS debit,
     dt_billing.`bill_status` AS bill_status,
     dt_billing.`edited_value` AS edited_value,
     dt_billing.`reason` AS reason,
     dept.department_name AS deptName,
     concat(dt_patientdetails.`Fname`," ", dt_patientdetails.`surname`," ",dt_patientdetails.Lname) AS patientName,
     dt_patientdetails.`DOB` AS dt_patientdetails_DOB
FROM
     `dt_billing` dt_billing LEFT JOIN `dt_patientdetails` dt_patientdetails ON dt_billing.`customer_id` = dt_patientdetails.`patient_id`
LEFT JOIN dt_departments dept on dt_billing.dept_code=dept.code
WHERE dt_billing.`hospital_id`=$P{hospitalId} AND ($P{deptCode}='' or dt_billing.`dept_code`=$P{deptCode}) AND dt_billing.`debit`=0 AND dt_billing.`dept_code`!='acc_007' and  dt_billing.`date` BETWEEN $P{from} and $P{to} group by dt_billing.dept_code,dt_billing.`visit_code`,dt_billing.`customer_id` ORDER BY dt_billing.`dept_code`, dt_billing.date ASC]]>
	</queryString>
	<field name="dt_billing_id" class="java.lang.Integer"/>
	<field name="dept_code" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="service_code" class="java.lang.String"/>
	<field name="customer_id" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="credit" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="debit" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="bill_status" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="edited_value" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="reason" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="deptName" class="java.lang.String"/>
	<field name="patientName" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="dt_patientdetails_DOB" class="java.sql.Date"/>
	<variable name="Amount_1" class="java.lang.Double" resetType="Group" resetGroup="payment_type" calculation="Sum">
		<variableExpression><![CDATA[$F{credit}]]></variableExpression>
		<initialValueExpression><![CDATA[0.00]]></initialValueExpression>
	</variable>
	<group name="payment_type">
		<groupExpression><![CDATA[$F{dept_code}]]></groupExpression>
		<groupHeader>
			<band height="19">
				<line>
					<reportElement x="3" y="15" width="239" height="1" uuid="01ac476d-a029-4541-a9e6-9a7c3857a241"/>
					<graphicElement>
						<pen lineWidth="0.25" lineColor="#6666FF"/>
					</graphicElement>
				</line>
				<textField>
					<reportElement x="1" y="5" width="256" height="11" forecolor="#3333FF" uuid="287d9c08-7130-40b7-a285-9be061f3958b"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{deptName}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="18">
				<staticText>
					<reportElement x="289" y="0" width="29" height="13" uuid="59cac67c-2483-4212-ae49-bc3a8dd4388e"/>
					<textElement textAlignment="Justified" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Total :]]></text>
				</staticText>
				<textField pattern="#,##0.00">
					<reportElement x="433" y="0" width="90" height="13" uuid="c807b95e-7043-426d-84af-dd96b4d023b4"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{Amount_1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="0" width="50" height="14" uuid="24dc744f-ee69-4052-a990-6da4153528bb"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Total Person;]]></text>
				</staticText>
				<line>
					<reportElement x="2" y="14" width="552" height="1" forecolor="#9999FF" uuid="85bf21a9-0520-4034-84c0-ef8997b41f33"/>
					<graphicElement>
						<pen lineWidth="0.25" lineStyle="Solid" lineColor="#CCCCCC"/>
					</graphicElement>
				</line>
				<break>
					<reportElement x="0" y="16" width="553" height="1" uuid="d0b8abd3-a410-4824-9884-3afd81055b5f"/>
				</break>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="32" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="12" width="140" height="20" uuid="a7721001-7164-4d30-941c-5d72834d3517"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Departmental General Income]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="97" splitType="Stretch">
			<staticText>
				<reportElement x="50" y="86" width="59" height="11" uuid="2d1f1fea-47b2-408d-9eed-b5ee8b5ddc8a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="86" width="66" height="11" uuid="f0ceb36f-58b5-40c5-b347-316f904adc37"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[PatientID]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="4" width="227" height="20" uuid="2128f471-bc78-4bea-b26b-955f270cde40"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Payment Statement between The given Dates]]></text>
			</staticText>
			<staticText>
				<reportElement x="132" y="86" width="51" height="11" uuid="20a7e05e-9914-4ca9-8b7c-7d990afaf6a4"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="479" y="86" width="44" height="11" uuid="03b536fc-5150-4ad1-aa6f-34c0e3488218"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Amount]]></text>
			</staticText>
			<line>
				<reportElement x="1" y="96" width="552" height="1" forecolor="#6666FF" uuid="14761926-4c06-4d35-ba7c-e283b165fa1a"/>
				<graphicElement>
					<pen lineWidth="0.75"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="1" y="86" width="20" height="11" uuid="b3e1e8e9-9c7e-498f-9741-2657e9e45f3a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Item]]></text>
			</staticText>
			<staticText>
				<reportElement x="279" y="85" width="161" height="11" uuid="e13a8d32-7e95-48f9-ad19-5457db79778c"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Name]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<line>
				<reportElement x="3" y="15" width="552" height="1" forecolor="#9999FF" uuid="0857bc25-5cba-42f9-920c-2039555116dd"/>
				<graphicElement>
					<pen lineWidth="0.5" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<textField pattern="MM/dd/yyyy" isBlankWhenNull="true">
				<reportElement x="50" y="0" width="59" height="15" uuid="d2539c45-a4e2-42f0-8ef4-fee0acdab46b"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="132" y="0" width="51" height="15" uuid="0cfbffb7-4266-4dc6-8d27-8ebfea93c655"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{service_code}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="479" y="0" width="44" height="16" uuid="316dd32c-d26e-4508-bff4-af509b684903"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{credit}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="21" height="15" uuid="5a5cc46e-57c7-47ca-b77a-cfe2012c88b7"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="203" y="0" width="63" height="15" uuid="d71549fc-ad96-4634-b1e0-ec429a87f5e2"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{customer_id}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="279" y="1" width="161" height="15" uuid="c67db78c-e18a-4e91-90d2-5b3d73d213f7"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{patientName}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<lastPageFooter>
		<band height="27">
			<staticText>
				<reportElement x="1" y="10" width="53" height="12" uuid="f1382228-b219-4b5f-b04b-331ed6c3e4c3"/>
				<textElement verticalAlignment="Bottom"/>
				<text><![CDATA[Printed on:]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy" isBlankWhenNull="true">
				<reportElement x="54" y="10" width="169" height="12" uuid="6209b4d2-0151-4289-9a72-cadb1ac26a27"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</lastPageFooter>
</jasperReport>
